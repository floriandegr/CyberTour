<!DOCTYPE html>
<html lang="nl">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Dynamic Timer</title>
 <style>
  #timerBox {
   position: fixed;
   top: 60px;
   right: 10px;
   width: 100px;
   height: 40px;
   background-color: #ff5722;
   color: #fff;
   border-radius: 8px;
   display: flex;
   justify-content: center;
   align-items: center;
   font-weight: bold;
   font-size: 16px;
   box-shadow: 0 2px 6px rgba(0,0,0,0.3);
   z-index: 1000;
  }
 </style>
</head>
<body>

<div id="timerBox">00:00</div>

<script>
 const timerBox = document.getElementById("timerBox");
 let countdown = null;
 let timeLeft = 60; // seconds

 // Function to start countdown
 function startTimer() {
  if(countdown) return; // already running
  timeLeft = 60; // reset timer
  updateTimerDisplay();

  countdown = setInterval(() => {
   timeLeft--;
   updateTimerDisplay();
   if(timeLeft <= 0) {
    clearInterval(countdown);
    countdown = null;
    timerBox.textContent = "Klaar!";
    localStorage.setItem("timer", "no"); // reset timer flag
   }
  }, 1000);
 }

 // Update timer display in MM:SS format
 function updateTimerDisplay() {
  const minutes = String(Math.floor(timeLeft / 60)).padStart(2, "0");
  const seconds = String(timeLeft % 60).padStart(2, "0");
  timerBox.textContent = `${minutes}:${seconds}`;
 }

 // Check localStorage.timer every 500ms
 setInterval(() => {
  const timerFlag = localStorage.getItem("timer");
  if(timerFlag === "yes") {
   startTimer();
  }
 }, 500);

 // Also listen for storage events from other tabs
 window.addEventListener("storage", (event) => {
  if(event.key === "timer" && event.newValue === "yes") {
   startTimer();
  }
 });

 // Initial display
 updateTimerDisplay();
</script>

</body>
</html>